<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Mes travaux Ã  Saint-Saturnin â€“ V4.2</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 0; }
    .container { max-width: 600px; margin: 30px auto; background: white; border-radius: 10px; padding: 20px; box-shadow: 0 0 8px rgba(0,0,0,0.1); }
    h1 { text-align: center; color: #2f5d2f; }
    .chatlog { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
    .bubble { padding: 10px 15px; border-radius: 20px; max-width: 85%; }
    .bot { background: #e0f0e0; align-self: flex-start; }
    .user { background: #cce0ff; align-self: flex-end; text-align: right; }
    .input-area { display: flex; margin-top: 20px; gap: 10px; }
    input[type="text"] { flex: 1; padding: 10px; border-radius: 5px; border: 1px solid #ccc; }
    button { padding: 10px 15px; background: #3b7d3b; color: white; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { background: #2d5c2d; }
    .footer { margin-top: 30px; font-size: 0.9em; color: #444; border-top: 1px solid #ccc; padding-top: 15px; }
    .footer a { color: #2f5d2f; text-decoration: none; }
    .footer a:hover { text-decoration: underline; }
    .map img { max-width: 100%; margin-top: 10px; border-radius: 4px; border: 1px solid #aaa; }
  </style>
</head>
<body>
<div class="container">
  <h1>Mes travaux Ã  Saint-Saturnin</h1>
  <div class="chatlog" id="chatlog">
    <div class="bubble bot">
      Bonjour et bienvenue dans lâ€™outil <strong>Mes travaux Ã  Saint-Saturnin</strong>.<br><br>
      Ce service vous aide Ã  comprendre les rÃ¨gles locales de lâ€™AVAP. Il ne remplace pas lâ€™avis officiel mais vous oriente pour vos projets.<br><br>
      ğŸ‘‰ Quel est votre projet ? (ex. â€œJe veux construire une terrasseâ€, â€œJe refais ma toitureâ€, â€œJe pose une clÃ´tureâ€, â€œJe rÃ©nove une faÃ§adeâ€, etc.)
    </div>
  </div>

  <div class="input-area">
    <input type="text" id="userInput" placeholder="DÃ©crivez votre projet...">
    <button onclick="sendMessage()">Envoyer</button>
  </div>

  <div class="footer">
    ğŸ“„ <a href="https://www.saint-saturnin63.fr/wp-content/uploads/2015/06/REGLEMENT-170718.pdf" target="_blank">
      Consulter le rÃ¨glement AVAP complet</a><br><br>
    ğŸ“¬ Pour toute question :<br>
    ğŸ›ï¸ Mairie : <a href="mailto:contact@saint-saturnin63.fr">contact@saint-saturnin63.fr</a><br>
    ğŸ¤ Asso : <a href="mailto:amis.de.saint.saturnin@gmail.com">amis.de.saint.saturnin@gmail.com</a><br>
    ğŸ“ 07 68 49 44 63
  </div>
</div>

<script>
const rules = {
  terrasse: {
    S1: "âœ… IntÃ©grÃ©e Ã  la pente naturelle.<br>âŒ Pilotis visibles interdits.<br>ğŸ“„ Page 34.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S2: "âœ… DiscrÃ¨te avec matÃ©riaux sobres.<br>âŒ Pilotis interdits.<br>ğŸ“„ Page 77.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S3: "âœ… AcceptÃ©e si peu visible.<br>âŒ SurÃ©lÃ©vation visible interdite.<br>ğŸ“„ Page 92.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin."
  },
  cloture: {
    S1: "âœ… Pierre, bois, mÃ©tal peint.<br>âŒ PVC, grillage nu interdits.<br>ğŸ“„ Page 26.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S2: "âœ… Souplesse possible hors vis-Ã -vis.<br>âŒ ClÃ´tures pleines interdites en faÃ§ade.<br>ğŸ“„ Page 70.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S3: "âœ… ClÃ´tures vÃ©gÃ©tales recommandÃ©es.<br>âŒ Grillages visibles dÃ©conseillÃ©s.<br>ğŸ“„ Page 96.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin."
  },
  facade: {
    S1: "âœ… Enduits chaux, pierre locale, tons ocre autorisÃ©s.<br>âŒ Bardages plastiques, enduits modernes interdits.<br>ğŸ“„ Page 25.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S2: "âœ… MatÃ©riaux anciens ou sobres en harmonie.<br>âŒ Enduits cimentÃ©s ou trop lisses interdits.<br>ğŸ“„ Page 28.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S3: "âœ… FaÃ§ades discrÃ¨tes et cohÃ©rentes recommandÃ©es.<br>âŒ FaÃ§ades clinquantes ou colorÃ©es interdites.<br>ğŸ“„ Page 30.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin."
  },
  toiture: {
    S1: "âœ… Tuiles canal traditionnelles, pente classique.<br>âŒ Toitures plates visibles interdites.<br>ğŸ“„ Page 35.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S2: "âœ… Tuiles vieillies ou canal, couleurs sobres.<br>âŒ Tuiles bÃ©ton, brillance Ã©levÃ©e interdites.<br>ğŸ“„ Page 38.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S3: "âœ… Toitures discrÃ¨tes et homogÃ¨nes recommandÃ©es.<br>âŒ Couleurs criardes interdites.<br>ğŸ“„ Page 40.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin."
  },
  extension: {
    S1: "âœ… Extension intÃ©grÃ©e au bÃ¢ti existant, volumes cohÃ©rents.<br>âŒ SurÃ©lÃ©vations dÃ©mesurÃ©es interdites.<br>ğŸ“„ Page 42.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S2: "âœ… MatÃ©riaux et proportions harmonisÃ©s.<br>âŒ Volumes modernes type cube interdits.<br>ğŸ“„ Page 44.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S3: "âœ… SobriÃ©tÃ© exigÃ©e, matÃ©riaux discrets.<br>âŒ SurÃ©lÃ©vations visibles ou cubiques interdites.<br>ğŸ“„ Page 45.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin."
  },
  menuiserie: {
    S1: "âœ… Bois peint, ferronneries fines, vitrages clairs.<br>âŒ PVC blanc brillant, volets roulants apparents interdits.<br>ğŸ“„ Page 46.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S2: "âœ… Formes traditionnelles, matÃ©riaux nobles.<br>âŒ Volets en plastique, vitrages rÃ©flÃ©chissants interdits.<br>ğŸ“„ Page 48.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S3: "âœ… DiscrÃ©tion et qualitÃ© exigÃ©es.<br>âŒ MatÃ©riaux industriels visibles interdits.<br>ğŸ“„ Page 50.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin."
  },
  commerce: {
    S1: "âœ… Enseignes peintes, bois ou mÃ©tal sobre.<br>âŒ Enseignes lumineuses clignotantes interdites.<br>ğŸ“„ Page 55.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S2: "âœ… Ã‰lÃ©ments intÃ©grÃ©s Ã  la faÃ§ade.<br>âŒ Caissons plastiques, enseignes criardes interdites.<br>ğŸ“„ Page 58.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S3: "âœ… SobriÃ©tÃ© commerciale imposÃ©e.<br>âŒ Enseignes saillantes interdites.<br>ğŸ“„ Page 60.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin."
  },
  photovoltaique: {
    S1: "âœ… IntÃ©grÃ©s au toit, invisibles depuis la rue.<br>âŒ Panneaux en faÃ§ade ou visibles interdits.<br>ğŸ“„ Page 36.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S2: "âœ… Discrets, intÃ©grÃ©s Ã  l'existant, hors vue publique.<br>âŒ Panneaux sur toiture plate visible interdits.<br>ğŸ“„ Page 39.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin.",
    S3: "âœ… Disposition arriÃ¨re et matÃ©riaux neutres recommandÃ©s.<br>âŒ Brillance excessive, installations visibles interdites.<br>ğŸ“„ Page 41.<br>ğŸ“Œ Contactez la mairie ou l'association des Amis de Saint-Saturnin."
  }
};

let step = 0;
let projectType = "";
const chatlog = document.getElementById("chatlog");

function sendMessage() {
  const input = document.getElementById("userInput");
  const msg = input.value.trim();
  if (!msg) return;
  append("user", msg);
  input.value = "";

  if (step === 0) {
    const text = msg.toLowerCase();
    if (text.includes("terrasse")) projectType = "terrasse";
    else if (text.includes("clÃ´ture") || text.includes("cloture")) projectType = "cloture";
    else if (text.includes("faÃ§ade") || text.includes("facade")) projectType = "facade";
    else if (text.includes("toiture") || text.includes("toit")) projectType = "toiture";
    else if (text.includes("extension") || text.includes("surÃ©lÃ©vation")) projectType = "extension";
    else if (text.includes("menuiserie") || text.includes("volet") || text.includes("fenÃªtre") || text.includes("vitrage") || text.includes("porte")) projectType = "menuiserie";
    else if (text.includes("commerce") || text.includes("enseigne")) projectType = "commerce";
    else if (text.includes("panneau") || text.includes("photovoltaÃ¯que") || text.includes("solaire")) projectType = "photovoltaique";
    else {
      append("bot", "Je nâ€™ai pas reconnu ce projet. Essayez avec : terrasse, clÃ´ture, faÃ§ade, toiture, extension, menuiserie, commerce ou panneaux photovoltaÃ¯ques.");
      return;
    }
    step = 1;
    append("bot", `Merci. Connaissez-vous votre secteur ? (S1, S2 ou S3)<br><br>
      ğŸ—ºï¸ Voici la carte des zones AVAP :<br>
      <div class="map">
        <a href="https://upload.wikimedia.org/wikipedia/commons/6/6f/Carte_saint_saturnin_zonage.png" target="_blank">
          <img src="https://upload.wikimedia.org/wikipedia/commons/6/6f/Carte_saint_saturnin_zonage.png" alt="Carte AVAP">
        </a>
      </div>`);
  } else if (step === 1) {
    const sec = msg.toUpperCase().match(/S[123]/);
    if (!sec || !["S1", "S2", "S3"].includes(sec[0])) {
      append("bot", "Merci dâ€™indiquer un secteur parmi : S1, S2 ou S3.");
      return;
    }
    append("bot", rules[projectType][sec[0]]);
    step = 0;
    projectType = "";
  }
}

function append(sender, text) {
  const div = document.createElement("div");
  div.className = "bubble " + sender;
  div.innerHTML = text;
  chatlog.appendChild(div);
  chatlog.scrollTop = chatlog.scrollHeight;
}
</script>
</body>
</html>
